<?php
/**
 * aheadWorks Co.
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the EULA
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://ecommerce.aheadworks.com/AW-LICENSE.txt
 *
 * =================================================================
 *                 MAGENTO EDITION USAGE NOTICE
 * =================================================================
 * This software is designed to work with Magento community edition and
 * its use on an edition other than specified is prohibited. aheadWorks does not
 * provide extension support in case of incorrect edition use.
 * =================================================================
 *
 * @category   AW
 * @package    AW_Advancednewsletter
 * @version    2.4.7
 * @copyright  Copyright (c) 2010-2012 aheadWorks Co. (http://www.aheadworks.com)
 * @license    http://ecommerce.aheadworks.com/AW-LICENSE.txt
 */
?><?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
<div class="page-title">
    <h1><?php echo $this->__('Newsletter Subscription') ?></h1>
</div>

<script type="text/javascript">
    function anCheckAllCheckboxes(curElem)
    {
        curElem.value = Math.abs(curElem.value-1);
        var checked = curElem.value == 1;
        $$('.an_segments_check').each(function(elem){
            elem.checked = checked;
        });
    }
</script>
<form action="<?php echo $this->getUpdateLink(); ?>" method="post" >
<p><?php echo $this->__('Your subscriptions:') ?></p>
<table class="data-table">
    <thead>
        <tr class="first last">
            <th width="10px"><input type="checkbox" id="an_select_all_checkboxes" value="0" onclick="anCheckAllCheckboxes(this)"/></th>
            <th><?php echo $this->__('Subscribe to all') ?></th>
        </tr>
    </thead>
    <?php foreach($this->getSegments() as $segment): ?>
    <tr>
        <td><input <?php if ($this->isChecked($segment)): ?> checked="checked" <?php endif; ?> type="checkbox" class="an_segments_check" value="<?php echo $segment->getCode(); ?>" id="<?php echo $segment->getCode(); ?>" name="segments_codes[]" /></td>
        <td><label for="<?php echo $segment->getCode(); ?>"><?php echo $segment->getTitle(); ?></label></td>
    </tr>
    <?php endforeach; ?>
</table>
<input type="hidden" value="<?php echo $this->getSubscriber()->getEmail() ?>" name="email" />
<div class="an-buttons">
    <button class="button form-button" type="submit"><span><?php echo $this->__('Update status') ?></span></button>
</div>
</form>
